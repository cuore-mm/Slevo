## MODIFIED Requirements

### Requirement: 画像ビューアトップバーの保存操作
システムは画像ビューアのトップバーに保存アクションを表示し、現在表示中の画像に対して保存操作を開始できるようにするSHALL。保存開始時は権限状態を確認し、必要な場合は権限要求を経由して同一の保存フローを継続しなければならないMUST。

#### Scenario: 保存ボタンから現在画像を保存する
- **WHEN** ユーザーが画像ビューアのトップバーにある保存ボタンをタップする
- **THEN** システムは現在表示中の画像を保存対象として保存処理を開始する

#### Scenario: 権限が必要な端末で保存権限を要求する
- **WHEN** 保存操作開始時に端末が保存権限を要求し、権限が未許可である
- **THEN** システムは保存対象URLを保持したまま権限要求を表示し、許可後に同じ対象で保存処理を再開する

### Requirement: 画像ビューアアクション実行の共通化
システムは画像ビューアの保存ボタンおよびその他メニューから起動する画像アクションを、スレッド画面と共通の実行処理で行うMUST。保存アクションについては、権限判定・保留URL管理・保存結果通知の判定ロジックをスレッド画面と同一契約で実行しなければならないMUST。

#### Scenario: 共通ランナーで画像アクションを実行する
- **WHEN** ユーザーが画像ビューアでコピー、共有、外部アプリ起動、Web検索、保存のいずれかを選択する
- **THEN** システムはスレッド画面と同じ実行契約に従って対象画像に対する処理を開始する

#### Scenario: メニュー種別が異なっても処理契約は同じ
- **WHEN** スレッド画面はBottomSheet、画像ビューアはDropdownMenuから同一アクションを選択する
- **THEN** システムは同じ入力条件に対して同じ成功系・失敗系の実行結果を提供する

#### Scenario: 保存結果通知をスレッド画面と同一文言で表示する
- **WHEN** 画像ビューアで単体保存または一括保存が完了する
- **THEN** システムはスレッド画面と同一の判定条件（単体成功/単体失敗/全成功/全失敗/部分成功）で結果通知を表示する
