## ADDED Requirements

### Requirement: 画像サムネイル読み込み進捗の可視化
システムは画像サムネイル表示中、読み込み進行状況をユーザーが認識できるインジケータを表示しなければならないMUST。対象にはスレッド画面のサムネイルグリッドと画像ビューア下部サムネイルバーを含まなければならないMUST。進捗率を算出可能な場合は進捗率に連動する表示を行い、算出不能な場合は無段階表示へフォールバックしなければならないMUST。

#### Scenario: 進捗率を算出できるサムネイルで進捗表示する
- **WHEN** ユーザーが画像サムネイルを含む投稿を表示し、対象画像の総量と受信量から進捗率を算出できる
- **THEN** システムは当該サムネイルに進捗率に連動したインジケータを表示する

#### Scenario: 進捗率算出不能時は無段階表示にフォールバックする
- **WHEN** 画像サムネイル読み込み中に総量不明またはキャッシュ経由などで進捗率を算出できない
- **THEN** システムは当該サムネイルに無段階インジケータを表示する

#### Scenario: ビューア下部サムネイルバーでも進捗表示する
- **WHEN** ユーザーが画像ビューアを開き、下部サムネイルバー項目の画像読み込みが継続している
- **THEN** システムは当該サムネイル項目に進捗インジケータを表示する

### Requirement: 画像ビューア主画像読み込み進捗の可視化
システムは画像ビューア画面で主画像を読み込み中、進捗状態を視認できるインジケータを表示しなければならないMUST。主画像の表示成功または失敗時には、読み込み中インジケータを終了しなければならないMUST。

#### Scenario: ビューア主画像読み込み中に進捗を表示する
- **WHEN** ユーザーが画像ビューアを開き、主画像の読み込みが継続している
- **THEN** システムは主画像領域に読み込み進捗インジケータを表示する

#### Scenario: 読み込み完了または失敗時にインジケータを終了する
- **WHEN** 主画像の読み込みが成功または失敗で終端する
- **THEN** システムは当該主画像に対する読み込み中インジケータ表示を終了する

### Requirement: 進捗表示導入後の既存操作契約維持
システムは進捗表示を追加しても、既存の画像ビューア遷移・画像切替・バー表示切替・shared transition 契約を変更してはならないMUST。

#### Scenario: サムネイルからのビューア遷移契約を維持する
- **WHEN** ユーザーが表示成功したサムネイルをタップして画像ビューアへ遷移する
- **THEN** システムは従来どおり同一投稿由来の画像一覧と初期 index 契約でビューアを起動する

#### Scenario: ビューア操作中の既存 UI 契約を維持する
- **WHEN** ユーザーが画像ビューアで画像タップ、スワイプ、サムネイル選択、バー表示切替を行う
- **THEN** システムは進捗表示追加前と同一の操作結果を返す
