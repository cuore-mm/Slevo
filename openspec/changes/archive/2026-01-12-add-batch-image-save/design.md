## Context
- 現状の画像メニューは長押しした画像URLのみを対象に操作する。
- レス本文の画像URL抽出は `extractImageUrls` を用いており、サムネイル表示と同一ロジックで判定している。

## Goals / Non-Goals
- Goals:
  - レス本文に含まれる画像URLを一括保存できること。
  - 同一URLは1回のみ保存すること。
  - 既存の画像メニューの挙動を壊さないこと。
- Non-Goals:
  - 保存履歴の永続管理や再試行キューの実装。
  - 画像保存のバックグラウンド継続（明示的な要望がない限り）。

## Decisions
- Decision: 画像メニューを開く時点で「対象レスの画像URL一覧」を保持する。
  - 既存の長押しコールバックはURLのみのため、レス本文由来の画像URL一覧を渡せるよう拡張する。
  - サムネイル生成と同じ `extractImageUrls` を使用し、重複は `distinct()` で除外する。
- Decision: レス内画像が2件以上のときのみ「レス内の画像をすべて保存」を表示する。
  - 1件のみの場合は単体保存で十分なため、表示を省略する。
- Decision: 一括保存は既存の保存ユーティリティを順次実行する。
  - 既存の `ImageCopyUtil.saveImageToMediaStore` を再利用し、まとめて保存する。
  - Android 10未満の権限は、まとめて保存開始前に一度だけ要求する。
- Decision: 保存結果は成功/失敗件数としてまとめて通知する。
  - 途中失敗があっても最後まで保存処理を続行し、集計して表示する。
- Decision: WorkManagerは今回は採用しない。
  - 最小変更を優先し、画面内のコルーチンで順次保存する。
  - ただし、バックグラウンド継続が必要であれば後続変更でWorkManager化する余地を残す。

## Risks / Trade-offs
- 画像枚数が多い場合、順次保存で完了まで時間がかかる。
- 画面離脱時に保存が中断する可能性がある（WorkManagerを採用しない場合）。

## Migration Plan
- 既存メニューに新項目を追加するのみで、既存データの移行は不要。

## Open Questions
- なし。
