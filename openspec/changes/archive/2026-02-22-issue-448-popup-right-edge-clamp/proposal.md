## Why

多段ポップアップをタップ投稿基準で表示する現在の仕様は、段が深くなるほど右方向へずれる意図を満たしている。
一方で、右端付近の投稿を起点にした場合にポップアップが画面外へはみ出し、右側が見切れる問題がある。
右側余白 4.dp を維持したまま、必要時のみ左側余白を広げて表示を保護する必要がある。
ただし左側余白が過剰に増えるとポップアップ幅が縮小して可読性が下がるため、左余白の上限値も必要である。

## What Changes

- ポップアップの X 座標に右端クランプを導入し、画面右側に 4.dp の余白を必ず確保する。
- 右端クランプが発動した場合は左方向に補正し、左側余白が大きくなることを許容する。
- 左側余白の最大値（初期案: 28.dp）を導入し、過度な左寄せによる表示幅縮小を防ぐ。
- 段ごとの右方向オフセット方針は維持し、見切れ防止のみを追加する。

## Capabilities

### New Capabilities

- なし

### Modified Capabilities

- `thread-tree-popup`: 多段ポップアップ表示時の右端見切れ防止（右余白 4.dp 固定 + 左方向補正 + 左余白上限）を追加する。

## Impact

- Affected specs:
  - `openspec/specs/thread-tree-popup/spec.md`
- Affected code:
  - `ReplyPopup` の表示位置計算（X 座標クランプ）
  - 必要に応じて位置計算ロジックのテスト
- Non-functional impact:
  - 画面幅の狭い端末や深い段数でも右端見切れを防止
  - 段ごとの右ずらし視覚効果は維持
