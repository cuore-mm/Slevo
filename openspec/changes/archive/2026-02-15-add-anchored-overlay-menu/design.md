## Context

`DropdownMenu` はアンカー基準の既定配置を持つが、ビューアのその他メニューでは「ボタン上に重ねる」厳密な配置制御が難しい。オフセット調整だけでは画面端補正時の期待挙動が不安定になりやすい。

そのため、`Popup` と独自 `PopupPositionProvider` を使い、アンカー矩形とポップアップサイズから表示座標を計算する共通コンポーネントへ移行する。

## Goals / Non-Goals

**Goals:**
- メニューをアンカー上に重ねる表示を安定して実現する。
- 画面端でのはみ出しを防ぐ位置補正を共通化する。
- 画像ビューアの既存メニュー項目・イベント契約を維持する。

**Non-Goals:**
- 全画面の既存 `DropdownMenu` を一括置換すること。
- メニュー項目の内容変更。
- アニメーション仕様の刷新。

## Decisions

- **`Popup` ベースの汎用アンカーメニューを新規作成する**
  - `PopupPositionProvider` でアンカー座標・ポップアップサイズ・ウィンドウサイズから描画位置を算出する。
  - 水平方向はアンカー中心基準、垂直方向はアンカー上へオーバーラップさせる。

- **画面外はクランプして視認可能範囲へ収める**
  - x/y とも `coerceIn` でウィンドウ内へ収める。
  - 上側に収まらない場合はアンカー下側へフォールバック配置する。

- **画像ビューアは既存メニュー項目をそのまま移送する**
  - メニューの表示位置のみ変更し、アクションの実行契約は維持する。

## Risks / Trade-offs

- [Risk] ポップアップ座標計算のバグで特定端末の表示位置がずれる可能性。
  - Mitigation: 小/大画面での目視確認とクランプ処理のユニット化を検討する。

- [Risk] 独自実装により標準 `DropdownMenu` より保守コストが増える可能性。
  - Mitigation: コンポーネントを汎用化し、利用箇所を統一して重複実装を避ける。

- [Trade-off] 実装は増えるが、UI意図に沿った配置制御と再利用性を優先する。
