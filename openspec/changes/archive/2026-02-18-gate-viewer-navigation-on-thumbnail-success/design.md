## Context

`ImageThumbnailGrid` は `SubcomposeAsyncImage` を用いてサムネイルを表示しているが、タップ時の遷移可否が描画結果と連動していない。
そのため、読み込み失敗サムネイルでも画像ビューア遷移が発生する。今回の変更は、サムネイル描画結果と遷移許可を同一コンポーネント内で同期し、既存の画像一覧契約（ビューアへ渡す一覧は元の抽出結果）を維持することを目的とする。

## Goals / Non-Goals

**Goals:**
- サムネイル表示成功時のみ画像ビューア遷移を許可する。
- 失敗/読込中サムネイルのタップ遷移を抑止する。
- 既存の `onImageClick` 契約（URL一覧・index・namespace）を維持する。

**Non-Goals:**
- 画像ビューアに渡す画像一覧を成功画像だけへ再構築すること。
- サムネイル失敗時の新規UI（エラーバッジやトースト）追加。
- 画像読み込みライブラリやキャッシュ戦略の変更。

## Decisions

- **サムネイルごとの遷移許可状態を `ImageThumbnailGrid` で保持する**
  - `onSuccess` で許可、`onLoading`/`onError` で不許可に更新し、タップ判定時に参照する。
  - 代替案として呼び出し元（ThreadScreen など）で遷移可否を管理する方法もあるが、表示状態情報が `SubcomposeAsyncImage` 側にあるため分散管理を避ける。

- **遷移入力の URL 一覧は既存契約を維持する**
  - ユーザー要望に合わせ、ビューア内リストの絞り込みは行わない。
  - 代替案として成功画像のみへ再構築すると index 再計算と起点差異が増え、既存契約から逸脱するため採用しない。

- **長押し挙動は現状維持する**
  - 今回の要件は「画像ビューアへの遷移制御」のみであり、長押しメニュー表示（保存/共有等）は別契約として維持する。

## Risks / Trade-offs

- [Risk] 非同期再読み込み中に遷移可否が短時間で変化し、タップ反応が不安定に見える可能性。
  - Mitigation: ロード状態遷移を明示的に管理し、`onSuccess` 到達後のみ遷移許可とする。

- [Trade-off] 失敗サムネイルでタップ無反応に見える可能性。
  - Mitigation: 本変更では遷移不整合の解消を優先し、追加フィードバックUIは別変更で扱う。
