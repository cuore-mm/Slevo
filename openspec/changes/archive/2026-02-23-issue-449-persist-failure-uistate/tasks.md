## 1. 状態管理のUiState移行

- [x] 1.1 スレッド画面側 `UiState`/ViewModel に失敗URL状態（追加・解除）を定義する
- [x] 1.2 画像ビューア側 `ImageViewerUiState`/ViewModel に失敗URL状態（追加・解除）を定義する
- [x] 1.3 失敗状態キーを index 依存から URL 基準へ移行する

## 2. 投稿サムネイルへの適用

- [x] 2.1 `ImageThumbnailGrid` のローカル失敗状態保持を削除し、`UiState` 参照へ置き換える
- [x] 2.2 失敗状態中は非リクエスト、明示リロード時のみ再取得開始の契約を維持する
- [x] 2.3 スクロール再表示でローディング表示へ戻らないことを確認する

## 3. ビューア本体への適用

- [x] 3.1 `ImageViewerPager` のローカル失敗状態保持を削除し、`UiState` 参照へ置き換える
- [x] 3.2 失敗ページ離脱・復帰時に失敗オーバーレイが維持されることを確認する
- [x] 3.3 本体リロードボタン押下時のみ再取得されることを確認する

## 4. 下部サムネイルへの適用

- [x] 4.1 `ImageViewerThumbnailBar` のローカル失敗状態保持を削除し、`UiState` 参照へ置き換える
- [x] 4.2 スクロール復帰時に失敗表示が維持されることを確認する
- [x] 4.3 失敗表示時もタップ契約（ページ切替のみ）を維持する

## 5. 回帰確認

- [x] 5.1 issue #449 系の再読み込み導線（投稿サムネイル/ビューア本体/下部サムネイル）が明示操作でのみ再取得することを確認する
- [x] 5.2 `ImageViewerTopBar` に変更が入っていないことを確認する
