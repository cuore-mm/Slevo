## Context

`ImageViewerScreen` は 1 つの Composable に状態初期化、`LaunchedEffect` による副作用、システムバー制御、サムネイル同期、UI 構築を集約している。
この構成では、機能を維持したまま一部ロジックのみを変更したい場合でも読解コストが高く、回帰リスクの見積もりが難しい。

今回の変更は機能追加ではなく、責務境界を明確化してメンテナンス性を上げるリファクタリングである。既存の `ImageViewerTopBar` / `ImageViewerPager` / `ImageViewerThumbnailSync` への分割方針を踏襲し、`ImageViewerScreen` を画面の組み立てと依存注入のオーケストレーションに限定する。

## Goals / Non-Goals

**Goals:**
- `ImageViewerScreen` の責務を UI 構築、状態保持、副作用処理の単位で分離する。
- 画面表示に関わる state を `UiState` として `ViewModel` に集約し、状態所有責務を画面外へ明確化する。
- サムネイル同期・システムバー制御・画像保存イベント処理を独立した単位へ移し、各ロジックの見通しを改善する。
- 既存のユーザー体験（見た目、操作、遷移、保存導線）を変更しない。

**Non-Goals:**
- 画像ビューアの新規機能追加や既存機能削除。
- 画面デザイン、文言、アクセシビリティ仕様の変更。
- ViewModel 契約や画像アクション契約の再設計。

## Decisions

- **`ImageViewerScreen` はオーケストレーターに限定する**
  - 画面の依存取得と主要コンポーネント組み立てのみを担当し、ロジック実行の主体を補助Composable/関数へ移す。
  - 代替案として単一ファイル内でセクションコメントだけを増やす案もあるが、関心事の分離が進まず Issue #441 の目的を満たしにくいため採用しない。

- **副作用群を用途別に分離する**
  - 画像保存イベント収集、システムバー表示制御、サムネイル同期監視を別単位で管理し、各副作用のトリガーと依存を局所化する。
  - 代替案として `LaunchedEffect` を 1 つに統合する案は、依存キー増加と条件分岐肥大化を招くため採用しない。

- **画面表示 state は `UiState` として `ViewModel` が所有する**
  - `isBarsVisible` など画面表示を決める state は `UiState` へ移し、Composable は state を描画する責務に限定する。
  - `PagerState` / `LazyListState` / `ZoomableState` など Compose ランタイム依存オブジェクトは UI ローカルで保持し、`UiState` へは含めない。
  - 代替案として state を UI ローカルに維持する構成は、リポジトリ方針（画面 state の `UiState` 管理）と不整合のため採用しない。

- **挙動不変を検証観点として固定する**
  - ページ切替時ズーム解除、バー表示連動、サムネイル同期、メニュー開閉、保存フローを回帰観点として明文化する。
  - 代替案としてコードレビューのみで確認する方法は、リファクタリングの回帰検出力が不足するため採用しない。

## Risks / Trade-offs

- [Risk] 関数分割時に `LaunchedEffect` の依存キーや実行順が変わり、同期タイミングがずれる可能性。
  - Mitigation: 既存条件を保ったまま分離し、サムネイル同期シナリオを回帰確認項目に含める。

- [Risk] state の受け渡し経路が増え、初期分割時にパラメータ不整合が発生する可能性。
  - Mitigation: `UiState` の公開項目を最小化し、Composable 側は必要な描画入力のみ受け取る契約に固定する。

- [Trade-off] ファイル数と関数数が増えるため、初見では追跡箇所が増える。
  - Mitigation: 命名を責務ベースに統一し、`ImageViewerScreen` を起点に読み進められる構成にする。
