## ADDED Requirements

### Requirement: 共有再利用メタデータの型情報管理
システムは共有系アクションの再利用メタデータとして、画像URLに対して `diskCacheKey` に加え、画像拡張子とMIME情報を保持しなければならないMUST。型情報は共有URI生成で再利用され、画像として解釈できる値へ正規化されなければならないMUST。

#### Scenario: 表示成功時に拡張子とMIMEを登録する
- **WHEN** 画像表示が成功し、共有再利用メタデータを記録する
- **THEN** システムは `diskCacheKey` とともに拡張子およびMIMEを正規化して保存する

#### Scenario: 型情報が不正な場合は安全既定値を使う
- **WHEN** 再利用メタデータの拡張子またはMIMEが空、または画像型として無効である
- **THEN** システムは共有URI生成時に `jpg` と `image/jpeg` を適用する

### Requirement: 共有URI生成における型情報優先
システムは共有/外部アプリ起動の再利用経路で、キャッシュ実ファイル名に依存せず再利用メタデータの型情報を優先して共有ファイルを生成しなければならないMUST。

#### Scenario: キャッシュ実ファイル名が画像拡張子でなくてもプレビュー可能な共有を行う
- **WHEN** 再利用元キャッシュの実ファイル名が画像拡張子を持たない
- **THEN** システムは再利用メタデータの拡張子/MIMEを用いて共有ファイルを生成し、共有シートで画像として扱えるURIを提供する
