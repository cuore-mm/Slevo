## MODIFIED Requirements

### Requirement: 画像ビューアトップバーのその他メニュー
システムは画像ビューアのトップバーにその他アクションボタンを表示し、押下時に画像読み込み状態に応じた `DropdownMenu` のアクションを選択できるようにするSHALL。

#### Scenario: 読み込み成功時は既存メニューを表示する
- **WHEN** 対象画像が読み込み成功状態で、ユーザーが画像ビューアのその他ボタンをタップする
- **THEN** システムは単体保存を除く既存画像アクションを表示する

#### Scenario: 404/410失敗時は限定メニューを表示する
- **WHEN** 対象画像の読み込み失敗種別が 404 または 410 で、ユーザーがその他ボタンをタップする
- **THEN** システムは `NG追加` と `URLコピー` のみを表示する

#### Scenario: その他失敗時はレンズを含む失敗向けメニューを表示する
- **WHEN** 対象画像の読み込み失敗種別が 404/410 以外で、ユーザーがその他ボタンをタップする
- **THEN** システムは `NG追加`、`URLコピー`、`Googleレンズ` を表示する

#### Scenario: 読み込み中は中止を除く読み込み向けメニューを表示する
- **WHEN** 対象画像が読み込み中状態で、ユーザーがその他ボタンをタップする
- **THEN** システムは `NG追加`、`URLコピー`、`Googleレンズ` を表示する

#### Scenario: バー非表示時はメニューを閉じる
- **WHEN** ユーザー操作により画像ビューアのバー表示がオフになる
- **THEN** システムは表示中の `DropdownMenu` を閉じる

### Requirement: その他メニューのアクション実行
システムは画像ビューアのその他メニューで選択されたアクションを、対象画像の読み込み状態で許可された範囲内で実行し、共通実行契約に従って処理しなければならないMUST。

#### Scenario: 成功時に既存アクションを実行する
- **WHEN** 対象画像が読み込み成功状態で、ユーザーがその他メニューから既存アクションを選択する
- **THEN** システムは現在表示中画像を対象に既存画像アクションと同等の処理を実行する

#### Scenario: 404/410失敗時に限定アクションのみ実行する
- **WHEN** 対象画像の読み込み失敗種別が 404 または 410 の状態で、ユーザーがその他メニューを操作する
- **THEN** システムは `NG追加` と `URLコピー` のみ実行可能にし、他アクションは実行しない

#### Scenario: その他失敗時に失敗向けアクションを実行する
- **WHEN** 対象画像の読み込み失敗種別が 404/410 以外で、ユーザーがその他メニューを操作する
- **THEN** システムは `NG追加`、`URLコピー`、`Googleレンズ` を実行可能にする

#### Scenario: 読み込み中に読み込み向けアクションを実行する
- **WHEN** 対象画像が読み込み中状態で、ユーザーがその他メニューを操作する
- **THEN** システムは `NG追加`、`URLコピー`、`Googleレンズ` を実行可能にする

## ADDED Requirements

### Requirement: 画像ビューア読み込み中の中止アクション
システムは画像ビューアで対象画像が読み込み中のとき、トップバーに `読み込みを中止` のアイコンアクションを表示しなければならないMUST。中止実行時は対象画像の読み込みを停止し、リトライ導線を表示できる状態へ遷移しなければならないMUST。

#### Scenario: 読み込み中のみ中止アイコンを表示する
- **WHEN** 対象画像が読み込み中状態で画像ビューアを表示する
- **THEN** システムはトップバーに `読み込みを中止` アイコンを表示する

#### Scenario: 読み込み成功または失敗時は中止アイコンを表示しない
- **WHEN** 対象画像が読み込み成功または読み込み失敗状態で画像ビューアを表示する
- **THEN** システムはトップバーに `読み込みを中止` アイコンを表示しない

#### Scenario: 中止アイコンで読み込みを停止してリトライ導線を表示する
- **WHEN** 対象画像が読み込み中状態で、ユーザーがトップバーの `読み込みを中止` アイコンをタップする
- **THEN** システムは対象画像の読み込みを停止し、対象画像をリトライ可能な表示状態へ遷移させる
