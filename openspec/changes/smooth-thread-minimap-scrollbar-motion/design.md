## Context

現状の `MomentumBar` は、バー上の Y 座標を「投稿数で等分したインデックス」に変換し、ドラッグ中も `scrollToItem(index)` を繰り返す実装になっている。この方式は以下の制約を持つ。

- ドラッグ移動がインデックス単位の段階的ジャンプになりやすい。
- 投稿高さが可変な場合、指の移動量とリスト移動量の体感が一致しにくい。
- ビューポートインジケーターが `firstVisibleItemIndex` 主体で更新されるため、表示が階段状に見える。

本変更は、ミニマップ操作時の体感を「連続的に追従するスクロール」へ寄せることを目的とし、既存UI（ミニマップ自体の見た目・色・マーカー）は維持する。

## Goals / Non-Goals

**Goals:**
- ドラッグ操作時に、指の移動とリスト移動が連続的に対応すること。
- タップ操作時は従来どおり目標位置へ移動できること。
- インジケーター表示を `firstVisibleItemScrollOffset` を含む連続値で更新し、カクつきを抑えること。
- 上端/下端・投稿数が少ないケースでも破綻しない境界処理を設けること。

**Non-Goals:**
- Momentum グラフの描画アルゴリズム自体の刷新。
- ミニマップ内の色分け・マーカー種別の追加。
- 通常スクロールバー（`SlevoLazyColumnScrollbar`）の挙動変更。

## Decisions

### 1) ドラッグはピクセル連続制御を採用する
- 決定: `onVerticalDrag` は `scrollToItem` を使わず、`scrollBy` によるピクセル単位の連続移動へ変更する。
- 理由: インデックス丸め誤差による段差を避け、指とリストの追従を一致させるため。
- 代替案:
  - `animateScrollToItem` をドラッグごとに使う案: 連続イベント下でキャンセル/再開始が多発し、追従が遅れるため不採用。
  - 既存 `scrollToItem` 維持で補間のみ追加する案: 根本の段階移動が残るため不採用。

### 2) タップ移動とドラッグ移動を明確に分離する
- 決定: タップは目標位置ジャンプ（必要なら短時間アニメ）を維持し、ドラッグは連続移動のみを担当する。
- 理由: タップは「目的地へ移動」、ドラッグは「現在地を連続調整」という意図が異なり、同一制御にすると双方が不自然になるため。
- 代替案:
  - すべて連続制御へ統一する案: タップの即応性が低下するため不採用。

### 3) インジケーター位置は index + offset で算出する
- 決定: `firstVisibleItemIndex` に `firstVisibleItemScrollOffset` 相当の補間値を加えた連続位置でインジケーターを更新する。
- 理由: 可視領域表示の段差を減らし、体感の「引っかかり」を抑えるため。
- 代替案:
  - index のみで維持する案: 階段状更新が残るため不採用。

### 4) 境界クランプを明示する
- 決定: 投稿数 0/1、バー高さ 0、上端/下端近傍での入力値を明示的にクランプし、過剰スクロール要求を防ぐ。
- 理由: 連続制御化に伴い、極端値や高頻度イベントでの安全性を担保するため。

## Risks / Trade-offs

- [Risk] `scrollBy` の高頻度呼び出しでフレーム負荷が増える可能性 → 入力差分の最小閾値を設定し、微小移動イベントを間引く。
- [Risk] 可変高さ投稿で理想的な位置一致が難しいケースが残る → まずは offset 補間で体感を改善し、必要に応じて将来は可視アイテムベースの推定を追加する。
- [Risk] タップとドラッグの判定境界で挙動が揺れる可能性 → 既存ジェスチャAPIを活かし、開始イベントでモードを固定する。
