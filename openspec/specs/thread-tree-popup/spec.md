# thread-tree-popup Specification

## Purpose
TBD - created by archiving change add-thread-tree-popup. Update Purpose after archive.
## Requirements
### Requirement: ツリー全体ポップアップ表示
システムはスレッド画面でレス本文/ヘッダーの通常タップ時に、該当レスの最上位祖先を起点とする同一ツリーの全投稿をポップアップ表示する SHALL。

#### Scenario: 親子関係があるレスをタップした場合
- **WHEN** ユーザーが親または子を持つレスの本文/ヘッダーを通常タップする
- **THEN** 最上位祖先から全子孫を含むツリー全体の投稿がポップアップ表示される

#### Scenario: 親子関係がないレスをタップした場合
- **WHEN** ユーザーが親も子も持たないレスの本文/ヘッダーを通常タップする
- **THEN** ツリー全体ポップアップは表示されない

### Requirement: ポップアップ内ツリー再表示抑止
システムはツリー全体ポップアップ内の本文/ヘッダー通常タップでは、ツリー全体ポップアップを新規表示しない SHALL。

#### Scenario: ポップアップ内のレス本文/ヘッダーをタップした場合
- **WHEN** ユーザーがツリー全体ポップアップ内のレス本文/ヘッダーを通常タップする
- **THEN** ツリー全体ポップアップが追加表示されない

### Requirement: 既存タップ挙動の維持
システムはツリー全体ポップアップ内でも、返信番号/返信元/ID/URL など既存のタップ挙動を維持する SHALL。

#### Scenario: ポップアップ内で返信番号をタップした場合
- **WHEN** ユーザーがツリー全体ポップアップ内で返信番号をタップする
- **THEN** 返信番号に対応したポップアップ表示が行われる

