# thread-minimap-scrollbar

## Purpose

（TBD）

## ADDED Requirements

### Requirement: ミニマップ表示中インジケータの連続追従
スレッド画面でミニマップ付きスクロールバーを有効化した場合、システムは表示中インジケータの上端位置を投稿インデックスの離散値ではなく、現在のスクロール量を反映した連続値で算出して描画しなければならない。

#### Scenario: 先頭投稿内での微小スクロール
- **WHEN** ユーザーが同一投稿内で少量ずつ縦スクロールする
- **THEN** 表示中インジケータの上端は段階的にジャンプせず、スクロール量に応じて連続的に移動する

### Requirement: 表示中インジケータ高さの可視領域反映
スレッド画面でミニマップ付きスクロールバーを有効化した場合、システムは表示中インジケータの高さを整数件数近似ではなく、先頭・末尾要素の部分可視を含む実際の可視範囲に基づいて算出しなければならない。

#### Scenario: 先頭と末尾が部分表示される位置
- **WHEN** ビューポート内で先頭要素と末尾要素の両方が部分表示される
- **THEN** 表示中インジケータの高さは可視領域比率に追従し、不要な伸縮ジャンプを起こさない

### Requirement: ミニマップ既存要素との互換維持
本変更適用後もシステムは、勢いグラフ・URL マーカー・新着ライン・タップ/ドラッグによるジャンプ操作の既存挙動を変更してはならない。

#### Scenario: インジケータ描画改善後の操作確認
- **WHEN** ユーザーがミニマップをタップまたはドラッグして移動する
- **THEN** スレッド本体のスクロールジャンプ挙動は従来どおり維持され、インジケータのみが滑らかに追従する
